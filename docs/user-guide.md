# 👥 用户使用指南

## 📋 概述

**AI小说生成器**是一款基于大语言模型的智能小说创作工具，帮助你高效创作逻辑严谨、设定统一的长篇故事。本指南将详细介绍如何安装、配置和使用这个工具。

## 🛠️ 环境准备

### 系统要求
- **操作系统**: Windows 10/11, macOS 10.15+, Linux (Ubuntu 18.04+)
- **Python版本**: 3.9 - 3.12 (推荐3.10或3.11)
- **内存**: 建议8GB以上
- **存储空间**: 至少2GB可用空间

### 必需的API服务
你需要至少一个以下服务的API密钥：

**推荐选择**:
- 🌟 **DeepSeek** - 性价比高，中文效果好
- 🌟 **OpenAI GPT-4** - 质量最佳，价格较高
- 🌟 **Google Gemini** - 免费额度大，多模态支持

**其他选择**:
- Azure OpenAI, Ollama本地部署, 硅基流动等

## 📥 安装步骤

### 方法一：从源码安装（推荐）

1. **下载项目**
```bash
# 克隆项目
git clone https://github.com/YILING0013/AI_NovelGenerator.git
cd AI_NovelGenerator

# 或下载ZIP文件并解压
```

2. **安装Python依赖**
```bash
# 安装依赖包
pip install -r requirements.txt

# 如果遇到安装问题，可尝试使用国内镜像
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

3. **运行程序**
```bash
python main.py
```

### 方法二：使用预编译版本

1. 从[Releases页面](https://github.com/YILING0013/AI_NovelGenerator/releases)下载最新版本
2. 解压到任意目录
3. 双击运行 `AI_NovelGenerator.exe`

## ⚙️ 初始配置

### 1. 首次启动配置

启动程序后，你会看到主界面。首先需要配置API密钥：

1. 点击 **"Configuration"** 标签页
2. 在 **"LLM配置"** 区域进行设置

### 2. 配置LLM接口

#### DeepSeek配置（推荐新手）
```
接口格式: DeepSeek
API Key: sk-xxxxxxxxxxxxxxxx  (从DeepSeek官网获取)
Base URL: https://api.deepseek.com/v1
模型名称: deepseek-chat
温度: 0.7
最大Token: 8192
超时时间: 600
```

#### OpenAI配置
```
接口格式: OpenAI
API Key: sk-xxxxxxxxxxxxxxxx  (从OpenAI官网获取)
Base URL: https://api.openai.com/v1
模型名称: gpt-4o-mini
温度: 0.7
最大Token: 8192
超时时间: 600
```

#### Google Gemini配置
```
接口格式: Gemini
API Key: AIzaSyxxxxxxxxxxxxxxxx  (从Google AI Studio获取)
Base URL: https://generativelanguage.googleapis.com/v1beta/openai
模型名称: gemini-2.5-pro
温度: 0.7
最大Token: 32768
超时时间: 600
```

### 3. 配置Embedding接口

用于知识库检索和上下文分析：

```
接口格式: OpenAI
API Key: (与LLM相同或单独申请)
Base URL: https://api.openai.com/v1
模型名称: text-embedding-ada-002
检索数量: 4
```

### 4. 测试配置

配置完成后：
1. 点击 **"测试LLM配置"** 按钮
2. 点击 **"测试Embedding配置"** 按钮
3. 确保两个测试都通过

### 5. 保存配置

点击 **"保存配置"** 按钮，配置将保存到 `config.json` 文件中。

## 📖 创作流程

### 第一步：设定小说基本信息

1. 切换到 **"Main Functions"** 标签页
2. 在右侧 **"小说参数设置"** 区域填写：

```
小说主题: 例如"一个程序员穿越到修仙世界的故事"
小说类型: 例如"玄幻/科幻/都市/历史"等
章节数量: 例如"50"
字数要求: 例如"3000" (每章字数)
输出路径: 选择保存小说的文件夹
```

3. **内容指导**（可选）：
```
例如："注重角色成长，包含友情和爱情线，避免过于血腥的情节"
```

### 第二步：生成小说架构

1. 点击 **"生成小说架构"** 按钮
2. 等待生成完成（通常需要1-3分钟）
3. 切换到 **"Novel Architecture"** 标签页查看结果

**生成内容包括**:
- 📖 **世界观设定** - 故事背景、世界规则
- 👥 **主要角色** - 角色性格、背景、关系
- 📈 **剧情大纲** - 主线剧情、冲突设置
- 🎯 **核心主题** - 故事要传达的思想

### 第三步：生成章节蓝图

1. 在 **"章节参数"** 中输入要生成的章节号（例如：1）
2. 点击 **"生成章节蓝图"** 按钮
3. 切换到 **"Chapter Directory"** 标签页查看章节大纲

**章节蓝图包括**:
- 📝 **章节概要** - 本章主要情节
- 🎭 **角色发展** - 角色在本章的变化
- 🔗 **情节连接** - 与前后章节的关系
- 💡 **关键情节点** - 重要的剧情转折

### 第四步：生成章节内容

1. 确认章节号正确
2. 点击 **"生成章节草稿"** 按钮
3. 等待生成完成（通常需要2-5分钟）
4. 在左侧 **"本章内容"** 区域查看生成的章节

### 第五步：完善和优化

1. **手动编辑**：可以直接在文本框中修改内容
2. **一致性检查**：点击 **"一致性检查"** 按钮，检测剧情矛盾
3. **最终化处理**：点击 **"最终化章节"** 按钮，进行润色和优化
4. **保存章节**：点击 **"保存当前章节"** 按钮

### 第六步：继续创作

1. 修改章节号为下一章（例如：2）
2. 重复第三到第五步
3. 系统会自动维护角色状态和剧情连贯性

## 🔧 高级功能

### 角色状态管理

1. 切换到 **"Character State"** 标签页
2. 查看和编辑角色的当前状态：
   - 角色关系变化
   - 技能/能力发展
   - 心理状态变化
   - 重要物品获得

### 知识库导入

1. 准备参考资料（txt、md、pdf等格式）
2. 点击 **"导入知识库"** 按钮
3. 选择文件进行导入
4. 系统会在生成时自动引用相关内容

### 全局摘要管理

1. 切换到 **"Global Summary"** 标签页
2. 查看整部小说的关键信息摘要
3. 可手动添加重要的世界观设定或伏笔

### 批量生成

1. 在 **"其他功能"** 区域点击 **"批量生成"**
2. 设置起始和结束章节号
3. 系统会自动生成多个章节

## 💡 使用技巧

### 1. 提示词优化
- **具体化描述**：避免"写一个故事"，改为"写一个关于AI觉醒的科幻故事"
- **风格指定**：可以指定"模仿金庸风格"或"现代都市风格"
- **情节控制**：使用"本章重点描写战斗场面"等指导

### 2. 参数调整
- **温度设置**：
  - 0.3-0.5：逻辑性强，适合推理情节
  - 0.7-0.9：创意性强，适合描写场景
  - 1.0+：随机性高，适合头脑风暴

- **字数控制**：
  - 建议单章2000-5000字
  - 过短影响情节展开
  - 过长可能导致重复

### 3. 质量提升
- **多次生成**：对不满意的章节可以重新生成
- **分段编辑**：将长章节分成几个部分分别生成
- **人工润色**：AI生成后进行人工修改和完善

### 4. 项目管理
- **定期备份**：及时保存重要内容
- **版本控制**：为不同版本的章节做好标记
- **进度跟踪**：使用全局摘要记录创作进度

## ❓ 常见问题

### Q1: API调用失败怎么办？
**A**: 
1. 检查网络连接
2. 确认API密钥正确
3. 检查余额是否充足
4. 尝试更换Base URL
5. 如在国内，可能需要配置代理

### Q2: 生成的内容质量不高？
**A**:
1. 优化提示词描述
2. 调整温度参数
3. 尝试不同的模型
4. 增加更多背景信息
5. 使用知识库功能

### Q3: 程序运行缓慢？
**A**:
1. 检查网络速度
2. 减少单次生成字数
3. 关闭不必要的程序
4. 考虑使用本地模型

### Q4: 如何保证剧情连贯？
**A**:
1. 定期使用一致性检查
2. 维护角色状态信息
3. 更新全局摘要
4. 人工审核关键情节

### Q5: 可以商用吗？
**A**:
- 工具本身遵循开源协议
- 生成内容的版权归用户所有
- 需遵守所使用AI服务的条款
- 建议咨询法律专业人士

## 🔄 更新和维护

### 检查更新
1. 关注项目的GitHub页面
2. 查看Releases页面的最新版本
3. 阅读更新日志了解新功能

### 数据备份
- 定期备份 `config.json` 配置文件
- 备份整个项目文件夹
- 导出重要的小说内容

### 性能优化
- 定期清理向量数据库：点击 **"清空向量库"**
- 删除不需要的章节文件
- 重启程序释放内存

## 📞 获取帮助

- 🐛 **问题反馈**: [GitHub Issues](https://github.com/YILING0013/AI_NovelGenerator/issues)
- 💬 **使用交流**: 项目讨论区
- 📖 **文档更新**: 查看docs文件夹中的最新文档
- 🎥 **视频教程**: 关注项目主页的教程链接

---

*祝你创作愉快！用AI的力量，让想象力自由飞翔！* ✨